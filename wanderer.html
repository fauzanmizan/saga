<!-- == MODIFIED BY: Tim 3.D == -->
<!-- == TANGGAL: 2025-06-24, 21:45 == -->
<!-- == PERIHAL: Implementasi Fase III - Notifikasi & Logging Detail == -->
<!-- - Menambahkan tab baru "Event Log" di dalam navigasi quest-log-tabs. -->
<!-- - Menambahkan container HTML baru untuk menampilkan log peristiwa (#notification_log_content). -->
<!-- =========================================== -->
<!-- == MODIFIED BY: Tim 3.B == -->
<!-- == TANGGAL: 2025-06-23 18:32 WITA == -->
<!-- == PERIHAL: Direksi Selanjutnya: Fase II - Produksi & Prototyping (Pembangunan Struktur HTML Peta Dunia Interaktif & Indikator Nexus) == -->
<!-- - Menambahkan struktur HTML dasar untuk Peta Dunia Interaktif dan Indikator Nexus di dalam #wanderer-page-container. -->
<!-- - Struktur mencakup kontainer peta utama, placeholder untuk setiap wilayah (region), panel detail wilayah, dan tombol navigasi/interaksi peta. -->
<!-- - Memastikan integritas semua struktur HTML dan komentar sebelumnya tetap utuh. -->
<!-- =========================================== -->
<!-- == MODIFIED BY: Tim 3.B == -->
<!-- == TANGGAL: 2025-06-23 17:56 WITA == -->
<!-- == PERIHAL: Direksi Selanjutnya: Fase II - Produksi & Prototyping (Pembangunan Struktur HTML Mini-game Memesan (Kerajinan Kustom)) == -->
<!-- - Menambahkan struktur HTML dasar untuk modal mini-game 'Memesan' (#commission-modal) sebelum penutup tag </body>. -->
<!-- - Struktur modal mencakup placeholder untuk judul, deskripsi, area pilihan resep, area material yang dibutuhkan, inventaris pemain untuk material, umpan balik status pesanan, serta tombol lakukan pemesanan dan tutup. -->
<!-- - Memastikan integritas semua struktur HTML dan komentar sebelumnya tetap utuh. -->
<!-- =========================================== -->
<!-- == MODIFIED BY: Tim 3.B == -->
<!-- == TANGGAL: 2025-06-23 17:35 WITA == -->
<!-- == PERIHAL: Direksi Selanjutnya: Fase II - Produksi & Prototyping (Pembangunan Struktur HTML Mini-game Bertukar (Perdagangan Unik)) == -->
<!-- - Menambahkan struktur HTML dasar untuk modal mini-game 'Bertukar' (#barter-modal) sebelum penutup tag </body>. -->
<!-- - Struktur modal mencakup placeholder untuk judul, deskripsi, area barang yang ditawarkan NPC, area barang yang dimiliki pemain, ringkasan pertukaran, serta tombol lakukan pertukaran dan tutup. -->
<!-- - Memastikan integritas semua struktur HTML dan komentar sebelumnya tetap utuh. -->
<!-- =========================================== -->
<!-- == MODIFIED BY: Tim 3.B == -->
<!-- == TANGGAL: 2025-06-23 17:20 WITA == -->
<!-- == PERIHAL: Direksi Selanjutnya: Fase II - Produksi & Prototyping (Pembangunan Struktur HTML Mini-game Menginspirasi (Fokus Motivasi)) == -->
<!-- - Menambahkan struktur HTML dasar untuk modal mini-game 'Menginspirasi' (#inspire-modal) sebelum penutup tag </body>. -->
<!-- - Struktur modal mencakup placeholder untuk judul, deskripsi, area pilihan motivasi, umpan balik status NPC, bar kekuatan niat (canvas), serta tombol mulai dan tutup. -->
<!-- - Memastikan integritas semua struktur HTML dan komentar sebelumnya tetap utuh. -->
<!-- =========================================== -->
<!-- == MODIFIED BY: Tim 3.B == -->
<!-- == TANGGAL: 2025-06-23 16:30 WITA == -->
<!-- == PERIHAL: Direksi Selanjutnya: Fase II - Produksi & Prototyping (Pembangunan Struktur HTML Mini-game Merasakan (Spektrum Emosi)) == -->
<!-- - Menambahkan struktur HTML dasar untuk modal mini-game 'Merasakan' (#empathize-modal) sebelum penutup tag </body>. -->
<!-- - Struktur modal mencakup placeholder untuk judul, deskripsi, area spektrum emosi (canvas), penanda nada jiwa, instrumen nada jiwa, pesan umpan balik emosional, serta tombol mulai dan tutup. -->
<!-- - Memastikan integritas semua struktur HTML dan komentar sebelumnya tetap utuh. -->
<!-- =========================================== -->
<!-- == MODIFIED BY: Tim 3.B == -->
<!-- == TANGGAL: 2025-06-23 15:45 WITA == -->
<!-- == PERIHAL: Direksi Selanjutnya: Fase II - Produksi & Prototyping (Pembangunan Struktur HTML Mini-game Menantang (Duel Niat)) == -->
<!-- - Menambahkan struktur HTML dasar untuk modal mini-game 'Menantang' (#challenge-modal) sebelum penutup tag </body>. -->
<!-- - Struktur modal mencakup placeholder untuk judul, deskripsi, bar tekad lawan (canvas), area kartu strategi, pesan umpan balik duel, serta tombol mulai dan tutup. -->
<!-- - Memastikan integritas semua struktur HTML dan komentar sebelumnya tetap utuh. -->
<!-- =========================================== -->
<!-- == MODIFIED BY: Tim 3.B == -->
<!-- == TANGGAL: 2025-06-23 11:15 WITA == -->
<!-- == PERIHAL: Direksi Selanjutnya: Fase II - Produksi & Prototyping (Pembangunan Struktur HTML Mini-game Menyerap Gema) == -->
<!-- - Menambahkan struktur HTML dasar untuk modal mini-game 'Menyerap Gema' (#absorb-echo-modal) sebelum penutup tag </body>. -->
<!-- - Struktur modal mencakup placeholder untuk judul, deskripsi, area aliran gema (canvas), area saluran resonansi, bar progres kejelasan, serta tombol mulai dan tutup. -->
<!-- - Memastikan integritas semua struktur HTML dan komentar sebelumnya tetap utuh. -->
<!-- =========================================== -->
<!-- == MODIFIED BY: Tim 3.B == -->
<!-- == TANGGAL: 2025-06-23 03:35 WITA == -->
<!-- == PERIHAL: Direksi Selanjutnya: Fase II - Produksi & Prototyping (Pembangunan Struktur HTML Mini-game Menginterogasi) == -->
<!-- - Menambahkan struktur HTML dasar untuk modal mini-game 'Menginterogasi' (#interrogate-modal) sebelum penutup tag </body>. -->
<!-- - Struktur modal mencakup placeholder untuk judul, deskripsi, bar komposur (canvas), area rune barikade mental, dan area kartu argumen, serta tombol tutup. -->
<!-- - Memastikan integritas semua struktur HTML dan komentar sebelumnya tetap utuh. -->
<!-- =========================================== -->
<!-- == MODIFIED BY: Tim 3.B == -->
<!-- == TANGGAL: 2025-06-23 03:15 WITA == -->
<!-- == PERIHAL: Direksi Selanjutnya: Fase II - Produksi & Prototyping (Evolusi Visual Soul Sanctuary) == -->
<!-- - Memindahkan elemen p dengan ID #sanctuary-world-resonance-text ke dalam #sanctuary-visuals-wrapper agar terintegrasi lebih baik dengan elemen visual Sanctuary yang berevolusi. -->
<!-- - Memastikan semua elemen inti (#attribute-crystal, #conscience-scales, #chronicle-wall) tetap berada di dalam #sanctuary-visuals-wrapper. -->
<!-- - Memastikan semua struktur HTML sebelumnya tetap utuh. -->
<!-- =========================================== -->
<!-- == MODIFIED BY: Tim 3.B == -->
<!-- == TANGGAL: 2025-06-22 20:25 WITA == -->
<!-- == PERIHAL: Evolusi Visual Soul Sanctuary - Struktur HTML (Fase The Hall & The Observatory) == -->
<!-- - Menambahkan div dengan ID #sanctuary-visuals-wrapper di dalam #soul-sanctuary-container untuk mengelola evolusi visual. -->
<!-- - Memindahkan elemen #attribute-crystal, #conscience-scales, dan #chronicle-wall ke dalam #sanctuary-visuals-wrapper. -->
<!-- - Menambahkan elemen p dengan ID #sanctuary-world-resonance-text untuk menampilkan status resonansi dunia di Sanctuary. -->
<!-- - Memastikan semua struktur HTML sebelumnya tetap utuh dan tidak ada penghapusan yang tidak disengaja. -->
<!-- =========================================== -->
<!-- == MODIFIED BY: Tim 3.B == -->
<!-- == TANGGAL: 2025-06-22 19:20 WITA == -->
<!-- == PERIHAL: Pembangunan Struktur HTML Dasar Soul Sanctuary & Integritas Kode == -->
<!-- - Menambahkan struktur HTML placeholder untuk Soul Sanctuary di dalam #wanderer-page-container. -->
<!-- - Menambahkan div dengan ID #attribute-crystal, #conscience-scales, dan #chronicle-wall. -->
<!-- - Memastikan integritas elemen navigasi dan header yang sudah ada. -->
<!-- =========================================== -->
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Soulforge Saga - Dunia Pengembara</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;800&family=Cormorant+Garamond:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="css/style.css">
</head>
<body data-page="wanderer">
    
    <div id="wanderer-app" class="app-container">
        <aside class="w-24 lg:w-72 bg-sidebar-bg text-slate-300 flex flex-col shrink-0">
            <nav id="wanderer-nav" class="flex-1 px-4 py-8 space-y-3"></nav>
        </aside>
        
        <main class="flex-1 bg-content-bg overflow-y-auto">
            <header class="sticky top-0 bg-content-bg/80 backdrop-blur-sm z-10 h-24 flex items-center justify-between px-8 lg:px-12 border-b border-border-color">
                <div id="wanderer-header-title">
                    <h2 class="text-3xl font-bold text-white font-serif tracking-wider"></h2>
                </div>
                <!-- Tambahkan display World Resonance di sini (opsional, bisa juga di dalam page container) -->
                <div id="world-resonance-display" class="flex items-center space-x-2 text-slate-400">
                    <i data-feather="globe" class="w-5 h-5"></i>
                    <span id="resonance-status-text" class="text-sm">Resonance Status</span>
                </div>
                <div class="flex items-center space-x-5">
                    <div id="destiny-clock" class="text-right text-sm font-mono text-slate-400"></div>
                    <div id="wanderer-profile-icon" class="w-12 h-12 bg-indigo-500 rounded-full flex items-center justify-center text-xl font-bold text-white shadow-lg font-serif"></div>
                    <button id="logout-button" class="p-2 rounded-md hover:bg-slate-700"><i data-feather="log-out" class="w-5 h-5 text-slate-400"></i></button>
                </div>
            </header>
            <div id="wanderer-page-container" class="p-8 lg:p-12">
                <!-- Struktur HTML Awal untuk Soul Sanctuary (Dasbor Wanderer) -->
                <div id="soul-sanctuary-container" class="glass-card p-8 rounded-2xl shadow-lg border border-border-color">
                    <h3 class="text-2xl font-serif font-bold text-white tracking-wider mb-6 text-center">Tempat Perlindungan Jiwa</h3>
                    <p class="text-slate-400 text-center mb-4">Sebuah cerminan batin jiwamu, berevolusi seiring takdir.</p>

                    <!-- Wrapper untuk elemen visual Sanctuary yang berevolusi -->
                    <div id="sanctuary-visuals-wrapper" class="w-full h-full relative">
                        <!-- Status Resonansi Dunia di dalam Sanctuary, dipindahkan untuk evolusi visual -->
                        <p id="sanctuary-world-resonance-text" class="text-slate-400 text-center text-sm mb-8">Status Resonansi Dunia: Balanced Resonance</p>

                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            <!-- Kristal Atribut -->
                            <div id="attribute-crystal" class="glass-container p-6 rounded-lg text-center flex flex-col items-center justify-center min-h-[200px]">
                                <i data-feather="hexagon" class="w-12 h-12 text-indigo-400 mb-4"></i>
                                <h4 class="text-xl font-serif text-white mb-2">Kristal Atribut</h4>
                                <p class="text-slate-400 text-sm">Menampilkan kekuatan inti jiwamu.</p>
                                <div id="attribute-display" class="mt-4 text-left w-full">
                                    <!-- Data atribut akan dirender di sini oleh JS -->
                                </div>
                            </div>

                            <!-- Timbangan Nurani -->
                            <div id="conscience-scales" class="glass-container p-6 rounded-lg text-center flex flex-col items-center justify-center min-h-[200px]">
                                <i data-feather="sun" class="w-12 h-12 text-yellow-300 mb-4"></i>
                                <h4 class="text-xl font-serif text-white mb-2">Timbangan Nurani</h4>
                                <p class="text-slate-400 text-sm">Keseimbangan antara Niat dan Gema.</p>
                                <div id="alignment-display" class="mt-4 text-left w-full">
                                    <!-- Data alignment akan dirender di sini oleh JS -->
                                </div>
                            </div>

                            <!-- Dinding Kronik -->
                            <div id="chronicle-wall" class="glass-container p-6 rounded-lg text-center flex flex-col items-center justify-center min-h-[200px]">
                                <i data-feather="book-open" class="w-12 h-12 text-green-400 mb-4"></i>
                                <h4 class="text-xl font-serif text-white mb-2">Dinding Kronik</h4>
                                <p class="text-slate-400 text-sm">Catatan perjalanan jiwamu.</p>
                                <div id="chronicle-summary" class="mt-4 text-left w-full">
                                    <!-- Ringkasan kronik akan dirender di sini oleh JS -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Akhir dari wrapper elemen visual Sanctuary -->

                    <!-- Altar Permohonan (tetap di luar wrapper visual karena statis) -->
                    <div class="glass-card p-8 rounded-2xl shadow-lg border border-border-color mt-8">
                        <h3 class="text-2xl font-serif font-bold text-white tracking-wider mb-6">Altar Permohonan</h3>
                        <p class="text-slate-400 mb-4">Korbankan Esensi Niat Anda untuk memohon bimbingan dari Sang Penempa.</p>
                        <div class="space-y-4">
                            <div class="glass-container p-4 rounded-lg flex items-center justify-between">
                                <span class="text-slate-300">Esensi Niat Anda:</span>
                                <span class="font-mono text-white text-xl">${'${this.currentUser.essenceOfWill}'} <i data-feather="hexagon" class="inline-block w-5 h-5 ml-1 text-purple-400"></i></span>
                            </div>
                            <button id="petition-guidance-btn" class="glass-button primary-button w-full">
                                <i data-feather="compass" class="w-5 h-5 mr-2"></i> Memohon Petunjuk (5 Esensi Niat)
                            </button>
                            <button id="petition-trial-btn" class="glass-button primary-button w-full">
                                <i data-feather="sword" class="w-5 h-5 mr-2"></i> Memohon Ujian (10 Esensi Niat)
                            </button>
                            <button id="petition-blessing-btn" class="glass-button primary-button w-full">
                                <i data-feather="award" class="w-5 h-5 mr-2"></i> Memohon Berkah (20 Esensi Niat)
                            </button>
                        </div>
                    </div>
                </div>

                <div class="p-6 bg-card-bg rounded-lg mt-8">
                    <h3 class="font-serif text-xl mb-4">Pengaturan Saga</h3>
                    <div class="flex items-center space-x-4">
                        <button id="export-button" class="saga-button">Export Data Saga</button>
                        <label for="import-input" class="saga-button">Import Data Saga</label>
                        <input type="file" id="import-input" class="hidden" accept=".json">
                    </div>
                    <p class="text-sm text-slate-500 mt-2">Simpan progres Anda sebagai file cadangan, atau pulihkan dari cadangan.</p>
                </div>

                <!-- Struktur HTML untuk Peta Dunia Interaktif & Indikator Nexus -->
                <div id="world-map-container" class="glass-card p-8 rounded-2xl shadow-lg border border-border-color mt-8 min-h-[500px] relative overflow-hidden">
                    <h3 class="text-2xl font-serif font-bold text-white tracking-wider mb-6 text-center">Peta Dunia & Jaringan Nexus</h3>
                    <p class="text-slate-400 text-center mb-8">Jelajahi wilayah dan pantau status Nexus mereka.</p>

                    <!-- Placeholder untuk setiap wilayah -->
                    <div class="region-marker absolute w-6 h-6 rounded-full bg-indigo-500 border border-white shadow-lg cursor-pointer" id="region-thecentralnexus" data-region-id="TheCentralNexus" style="top: 50%; left: 50%; transform: translate(-50%, -50%);"></div>
                    <div class="region-marker absolute w-6 h-6 rounded-full bg-slate-400 border border-white shadow-lg cursor-pointer" id="region-thewhisperingreaches" data-region-id="TheWhisperingReaches" style="top: 20%; left: 30%; transform: translate(-50%, -50%);"></div>
                    <div class="region-marker absolute w-6 h-6 rounded-full bg-slate-400 border border-white shadow-lg cursor-pointer" id="region-theluminousplains" data-region-id="TheLuminousPlains" style="top: 80%; left: 70%; transform: translate(-50%, -50%);"></div>
                    <!-- Tambahkan wilayah lain di sini jika diperlukan (misal: Telara, Meridian) -->

                    <!-- Panel Detail Wilayah (tersembunyi secara default) -->
                    <div id="region-detail-panel" class="glass-card p-6 rounded-lg shadow-xl border border-border-color absolute bottom-8 right-8 w-80" style="display: none;">
                        <h4 id="detail-region-name" class="text-xl font-serif text-white mb-2">Nama Wilayah</h4>
                        <p class="text-slate-400 text-sm mb-4">Status Nexus: <span id="detail-nexus-status" class="font-bold"></span></p>
                        <p class="text-slate-300 text-sm">Intention: <span id="detail-intention-value" class="font-mono"></span></p>
                        <p class="text-slate-300 text-sm mb-4">Echo: <span id="detail-echo-value" class="font-mono"></span></p>
                        <div class="flex justify-end space-x-2">
                            <button id="detail-fortify-btn" class="glass-button primary-button px-4 py-2 text-sm">Fortify</button>
                            <button id="detail-cleansing-btn" class="glass-button secondary-button px-4 py-2 text-sm">Cleansing</button>
                        </div>
                    </div>

                    <!-- Tombol Navigasi/Interaksi Peta (placeholder) -->
                    <div class="absolute top-8 left-8 flex space-x-2 z-10">
                        <button id="map-zoom-in" class="glass-button p-2 rounded-full"><i data-feather="plus" class="w-5 h-5 text-slate-300"></i></button>
                        <button id="map-zoom-out" class="glass-button p-2 rounded-full"><i data-feather="minus" class="w-5 h-5 text-slate-300"></i></button>
                    </div>
                </div>
                <!-- Akhir Struktur HTML untuk Peta Dunia Interaktif & Indikator Nexus -->

                <!-- Container untuk Quest Log / Chronicle / Event Log -->
                <!-- Pastikan ID quest-log-tabs ada untuk setupQuestLogTabs -->
                <div class="border-b border-border-color mb-8">
                    <nav class="flex space-x-8" aria-label="Tabs" id="quest-log-tabs">
                        <button class="quest-tab active glass-button py-4 px-1 text-lg font-semibold border-b-2 border-transparent" data-target="active_quests_content">Active Quests</button>
                        <button class="quest-tab glass-button py-4 px-1 text-lg font-semibold text-slate-400 hover:text-slate-200 border-b-2 border-transparent" data-target="the_chronicle_content">The Chronicle</button>
                        <button class="quest-tab glass-button py-4 px-1 text-lg font-semibold text-slate-400 hover:text-slate-200 border-b-2 border-transparent" data-target="notification_log_content">Event Log</button>
                    </nav>
                </div>
                <div id="active_quests_content" class="quest-content active">
                    <div class="glass-card p-8 rounded-2xl shadow-lg border border-border-color">
                        <h3 class="text-2xl font-serif font-bold text-white tracking-wider mb-6">Active Threads of Fate</h3>
                        <div id="active-quests-log-container" class="space-y-4"></div>
                    </div>
                </div>
                <div id="the_chronicle_content" class="quest-content" style="display: none;">
                    <div class="glass-card p-8 rounded-2xl shadow-lg border border-border-color">
                        <div class="text-center mb-10">
                            <h3 class="text-4xl font-serif font-bold text-white tracking-wider">The Chronicle of The Soul Weaver</h3>
                            <p class="text-lg text-slate-400 mt-2">A living record of your sepak terjang since the First Day.</p>
                        </div>
                        <div id="chronicle-container" class="space-y-12 relative border-l-2 border-border-color ml-6"></div>
                    </div>
                </div>
                <div id="notification_log_content" class="quest-content" style="display: none;">
                    <div class="glass-card p-8 rounded-2xl shadow-lg border border-border-color">
                        <h3 class="text-2xl font-serif font-bold text-white tracking-wider mb-6">World Event Log</h3>
                        <div id="notification-log-container" class="space-y-4 overflow-y-auto max-h-[600px]">
                            <!-- Log entries will be rendered here -->
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Modal Mini-game Menginterogasi (Barikade Mental) -->
    <div id="interrogate-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-80 z-40 flex items-center justify-center p-8 opacity-0" style="display: none;">
        <div class="modal-content glass-card w-full max-w-2xl p-10 rounded-2xl shadow-2xl border border-border-color transform scale-95 opacity-0 animate-scale-in">
            <h2 id="interrogate-modal-title" class="text-3xl font-serif text-center text-white tracking-wider mb-4">Menginterogasi [Target Name]</h2>
            <p id="interrogate-modal-description" class="text-center text-slate-400 mt-4 text-lg leading-relaxed mb-6">Barikade mental lawan harus dipecahkan.</p>
            
            <p class="text-lg text-slate-300 mb-2">Komposur Anda:</p>
            <canvas id="interrogate-composure-canvas" class="w-full h-8 bg-slate-800 rounded-lg mb-8"></canvas>
            
            <p class="text-lg text-slate-300 mt-4 mb-2">Barikade Mental Target:</p>
            <div id="mental-barricade-display" class="mental-barricade-display flex flex-wrap justify-center gap-4 mb-8">
                <!-- Rune-rune akan dirender di sini oleh JavaScript -->
            </div>
            
            <p class="text-slate-400 text-center mb-4">Pilih Argumen untuk memecahkan perisai mental.</p>
            <div id="argument-cards-container" class="grid grid-cols-2 gap-4 w-full md:grid-cols-3">
                <!-- Kartu Argumen akan dirender di sini oleh JavaScript -->
            </div>

            <div class="mt-8 flex justify-end">
                <button id="interrogate-close-btn" class="glass-button px-6 py-3 font-semibold rounded-lg bg-slate-700 hover:bg-slate-600">Tutup</button>
            </div>
        </div>
    </div>
    <!-- Akhir Modal Mini-game Menginterogasi -->

    <!-- Modal Mini-game Menyerap Gema (Harmonisasi Gema) -->
    <div id="absorb-echo-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-80 z-40 flex items-center justify-center p-8 opacity-0" style="display: none;">
        <div class="modal-content glass-card w-full max-w-2xl p-10 rounded-2xl shadow-2xl border border-border-color transform scale-95 opacity-0 animate-scale-in">
            <h2 id="absorb-echo-modal-title" class="text-3xl font-serif text-center text-white tracking-wider mb-4">Menyerap Gema</h2>
            <p id="absorb-echo-modal-description" class="text-center text-slate-400 mt-4 text-lg leading-relaxed mb-6">Selaraskan jiwamu dengan aliran gema yang kacau.</p>
            
            <p class="text-lg text-slate-300 mb-2">Aliran Gema:</p>
            <canvas id="echo-flow-canvas" class="w-full h-48 bg-slate-800 rounded-lg mb-8 border border-border-color"></canvas>
            
            <p class="text-lg text-slate-300 mt-4 mb-2">Saluran Resonansi:</p>
            <div id="resonance-channel-display" class="w-full h-12 bg-slate-700 rounded-lg mb-8 border border-border-color flex items-center justify-center text-slate-400 italic">
                <!-- Visualisasi saluran resonansi akan dirender di sini -->
                <i data-feather="activity" class="w-6 h-6 mr-2"></i> Menyelaraskan...
            </div>
            
            <p class="text-lg text-slate-300 mt-4 mb-2">Progres Kejelasan:</p>
            <div id="clarity-progress-bar" class="w-full bg-slate-700 rounded-full h-4 mb-8">
                <div class="bg-indigo-500 h-full rounded-full" style="width: 0%;"></div>
            </div>

            <div class="mt-8 flex justify-end space-x-4">
                <button id="absorb-echo-start-btn" class="glass-button primary-button px-6 py-3 font-semibold rounded-lg">Mulai Harmonisasi</button>
                <button id="absorb-echo-close-btn" class="glass-button px-6 py-3 font-semibold rounded-lg bg-slate-700 hover:bg-slate-600">Tutup</button>
            </div>
        </div>
    </div>
    <!-- Akhir Modal Mini-game Menyerap Gema -->

    <!-- Modal Mini-game Menantang (Duel Niat) -->
    <div id="challenge-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-80 z-40 flex items-center justify-center p-8 opacity-0" style="display: none;">
        <div class="modal-content glass-card w-full max-w-2xl p-10 rounded-2xl shadow-2xl border border-border-color transform scale-95 opacity-0 animate-scale-in">
            <h2 id="challenge-modal-title" class="text-3xl font-serif text-center text-white tracking-wider mb-4">Menantang [Nama Lawan]</h2>
            <p id="challenge-modal-description" class="text-center text-slate-400 mt-4 text-lg leading-relaxed mb-6">Uji tekadmu melawan kekuatan lain.</p>
            
            <p class="text-lg text-slate-300 mb-2">Tekad Lawan:</p>
            <canvas id="opponent-will-canvas" class="w-full h-8 bg-slate-800 rounded-lg mb-8 border border-border-color"></canvas>
            
            <p class="text-lg text-slate-300 mt-4 mb-2">Strategi Anda:</p>
            <div id="strategy-cards-container" class="grid grid-cols-2 gap-4 w-full md:grid-cols-3 mb-8">
                <!-- Kartu Strategi akan dirender di sini oleh JavaScript -->
            </div>

            <p id="duel-feedback-message" class="text-center text-lg text-indigo-400 mb-8 h-8"></p>

            <div class="mt-8 flex justify-end space-x-4">
                <button id="challenge-start-btn" class="glass-button primary-button px-6 py-3 font-semibold rounded-lg">Mulai Duel</button>
                <button id="challenge-close-btn" class="glass-button px-6 py-3 font-semibold rounded-lg bg-slate-700 hover:bg-slate-600">Tutup</button>
            </div>
        </div>
    </div>
    <!-- Akhir Modal Mini-game Menantang -->

    <!-- Modal Mini-game Merasakan (Spektrum Emosi) -->
    <div id="empathize-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-80 z-40 flex items-center justify-center p-8 opacity-0" style="display: none;">
        <div class="modal-content glass-card w-full max-w-2xl p-10 rounded-2xl shadow-2xl border border-border-color transform scale-95 opacity-0 animate-scale-in">
            <h2 id="empathize-modal-title" class="text-3xl font-serif text-center text-white tracking-wider mb-4">Merasakan [Target Name]</h2>
            <p id="empathize-modal-description" class="text-center text-slate-400 mt-4 text-lg leading-relaxed mb-6">Selami kedalaman nada jiwa target.</p>
            
            <p class="text-lg text-slate-300 mb-2">Spektrum Emosi:</p>
            <canvas id="emotion-spectrum-canvas" class="w-full h-24 bg-slate-800 rounded-lg mb-8 border border-border-color"></canvas>
            <!-- Note: Positioning of soul-marker will likely be managed by JS dynamically based on canvas -->
            <div id="soul-marker" class="absolute left-1/2 -ml-2 w-4 h-4 rounded-full bg-brand-color shadow-lg" style="top: calc(50% + 12px);"></div>
            
            <p class="text-lg text-slate-300 mt-4 mb-2">Instrumen Nada Jiwa:</p>
            <div id="soul-tones-instrument-container" class="grid grid-cols-3 gap-4 w-full mb-8">
                <!-- Tombol atau visualisasi nada jiwa akan dirender di sini oleh JavaScript -->
                <button class="glass-button px-6 py-3 font-semibold rounded-lg">Nada Rendah</button>
                <button class="glass-button px-6 py-3 font-semibold rounded-lg">Nada Tengah</button>
                <button class="glass-button px-6 py-3 font-semibold rounded-lg">Nada Tinggi</button>
            </div>

            <p id="emotional-feedback-message" class="text-center text-lg text-indigo-400 mb-8 h-8"></p>

            <div class="mt-8 flex justify-end space-x-4">
                <button id="empathize-start-btn" class="glass-button primary-button px-6 py-3 font-semibold rounded-lg">Mulai Merasakan</button>
                <button id="empathize-close-btn" class="glass-button px-6 py-3 font-semibold rounded-lg bg-slate-700 hover:bg-slate-600">Tutup</button>
            </div>
        </div>
    </div>
    <!-- Akhir Modal Mini-game Merasakan -->

    <!-- Modal Mini-game Menginspirasi (Fokus Motivasi) -->
    <div id="inspire-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-80 z-40 flex items-center justify-center p-8 opacity-0" style="display: none;">
        <div class="modal-content glass-card w-full max-w-2xl p-10 rounded-2xl shadow-2xl border border-border-color transform scale-95 opacity-0 animate-scale-in">
            <h2 id="inspire-modal-title" class="text-3xl font-serif text-center text-white tracking-wider mb-4">Menginspirasi [Target Name]</h2>
            <p id="inspire-modal-description" class="text-center text-slate-400 mt-4 text-lg leading-relaxed mb-6">Fokuskan Niatmu untuk membangkitkan motivasi.</p>
            
            <p class="text-lg text-slate-300 mb-2">Pilihan Motivasi:</p>
            <div id="motivation-choices-container" class="grid grid-cols-2 gap-4 w-full mb-8">
                <!-- Pilihan Motivasi akan dirender di sini oleh JavaScript -->
                <button class="glass-button px-6 py-3 font-semibold rounded-lg">Keberanian</button>
                <button class="glass-button px-6 py-3 font-semibold rounded-lg">Harapan</button>
                <button class="glass-button px-6 py-3 font-semibold rounded-lg">Ketekunan</button>
            </div>

            <p class="text-lg text-slate-300 mt-4 mb-2">Kekuatan Niat:</p>
            <canvas id="will-injection-canvas" class="w-full h-8 bg-slate-800 rounded-lg mb-8 border border-border-color"></canvas>

            <p id="npc-motivation-feedback" class="text-center text-lg text-indigo-400 mb-8 h-8"></p>

            <div class="mt-8 flex justify-end space-x-4">
                <button id="inspire-start-btn" class="glass-button primary-button px-6 py-3 font-semibold rounded-lg">Mulai Menginspirasi</button>
                <button id="inspire-close-btn" class="glass-button px-6 py-3 font-semibold rounded-lg bg-slate-700 hover:bg-slate-600">Tutup</button>
            </div>
        </div>
    </div>
    <!-- Akhir Modal Mini-game Menginspirasi -->

    <!-- Modal Mini-game Bertukar (Perdagangan Unik) -->
    <div id="barter-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-80 z-40 flex items-center justify-center p-8 opacity-0" style="display: none;">
        <div class="modal-content glass-card w-full max-w-2xl p-10 rounded-2xl shadow-2xl border border-border-color transform scale-95 opacity-0 animate-scale-in">
            <h2 id="barter-modal-title" class="text-3xl font-serif text-center text-white tracking-wider mb-4">Bertukar [Nama Lawan/NPC]</h2>
            <p id="barter-modal-description" class="text-center text-slate-400 mt-4 text-lg leading-relaxed mb-6">Tukarkan sumber daya langka untuk keuntungan unik.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div>
                    <p class="text-lg text-slate-300 mb-2">Penawaran NPC:</p>
                    <div id="npc-offerings-container" class="grid grid-cols-2 gap-4 p-4 bg-slate-800 rounded-lg border border-border-color min-h-[150px]">
                        <!-- Barang yang ditawarkan NPC akan dirender di sini oleh JavaScript -->
                        <div class="glass-container p-3 rounded-lg text-center flex flex-col items-center justify-center">
                            <i data-feather="box" class="w-8 h-8 text-slate-400 mb-2"></i>
                            <p class="text-sm text-slate-300">Item Langka</p>
                            <p class="text-xs text-slate-500">NPC menawarkan ini</p>
                        </div>
                    </div>
                </div>
                <div>
                    <p class="text-lg text-slate-300 mb-2">Inventaris Anda:</p>
                    <div id="player-inventory-for-barter" class="grid grid-cols-2 gap-4 p-4 bg-slate-800 rounded-lg border border-border-color min-h-[150px]">
                        <!-- Barang yang dimiliki pemain untuk ditukar akan dirender di sini oleh JavaScript -->
                        <div class="glass-container p-3 rounded-lg text-center flex flex-col items-center justify-center cursor-pointer hover:bg-slate-700">
                            <i data-feather="star" class="w-8 h-8 text-yellow-400 mb-2"></i>
                            <p class="text-sm text-slate-300">Esensi Murni</p>
                            <p class="text-xs text-slate-500">Klik untuk pilih</p>
                        </div>
                    </div>
                </div>
            </div>

            <p id="barter-summary-message" class="text-center text-lg text-indigo-400 mb-8 h-8"></p>

            <div class="mt-8 flex justify-end space-x-4">
                <button id="perform-barter-btn" class="glass-button primary-button px-6 py-3 font-semibold rounded-lg">Lakukan Pertukaran</button>
                <button id="barter-close-btn" class="glass-button px-6 py-3 font-semibold rounded-lg bg-slate-700 hover:bg-slate-600">Tutup</button>
            </div>
        </div>
    </div>
    <!-- Akhir Modal Mini-game Bertukar -->

    <!-- Modal Mini-game Memesan (Kerajinan Kustom) -->
    <div id="commission-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-80 z-40 flex items-center justify-center p-8 opacity-0" style="display: none;">
        <div class="modal-content glass-card w-full max-w-2xl p-10 rounded-2xl shadow-2xl border border-border-color transform scale-95 opacity-0 animate-scale-in">
            <h2 id="commission-modal-title" class="text-3xl font-serif text-center text-white tracking-wider mb-4">Memesan [Nama NPC Pengrajin]</h2>
            <p id="commission-modal-description" class="text-center text-slate-400 mt-4 text-lg leading-relaxed mb-6">Pesan item unik dengan material langka.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div>
                    <p class="text-lg text-slate-300 mb-2">Pilihan Resep:</p>
                    <div id="commission-recipes-container" class="grid grid-cols-2 gap-4 p-4 bg-slate-800 rounded-lg border border-border-color min-h-[150px]">
                        <!-- Resep item yang bisa dipesan akan dirender di sini oleh JavaScript -->
                        <div class="glass-container p-3 rounded-lg text-center flex flex-col items-center justify-center cursor-pointer hover:bg-slate-700">
                            <i data-feather="tool" class="w-8 h-8 text-indigo-400 mb-2"></i>
                            <p class="text-sm text-slate-300">Resep Artefak Kecil</p>
                            <p class="text-xs text-slate-500">Klik untuk pilih</p>
                        </div>
                    </div>
                </div>
                <div>
                    <p class="text-lg text-slate-300 mb-2">Material Dibutuhkan:</p>
                    <div id="required-materials-display" class="grid grid-cols-2 gap-4 p-4 bg-slate-800 rounded-lg border border-border-color min-h-[150px]">
                        <!-- Material yang dibutuhkan untuk resep yang dipilih akan dirender di sini oleh JavaScript -->
                        <div class="glass-container p-3 rounded-lg text-center flex flex-col items-center justify-center">
                            <i data-feather="box" class="w-8 h-8 text-slate-400 mb-2"></i>
                            <p class="text-sm text-slate-300">Material X</p>
                            <p class="text-xs text-slate-500">Jumlah: 3</p>
                        </div>
                    </div>
                </div>
            </div>

            <p class="text-lg text-slate-300 mt-4 mb-2">Inventaris Anda (Pilih Material):</p>
            <div id="player-materials-for-commission" class="grid grid-cols-2 gap-4 p-4 bg-slate-800 rounded-lg border border-border-color min-h-[150px] mb-8">
                <!-- Material pemain yang bisa digunakan akan dirender di sini oleh JavaScript -->
                <div class="glass-container p-3 rounded-lg text-center flex flex-col items-center justify-center cursor-pointer hover:bg-slate-700">
                    <i data-feather="star" class="w-8 h-8 text-yellow-400 mb-2"></i>
                    <p class="text-sm text-slate-300">Fragmen Murni</p>
                    <p class="text-xs text-slate-500">Jumlah: 5 (klik untuk gunakan)</p>
                </div>
            </div>

            <p id="commission-feedback-message" class="text-center text-lg text-indigo-400 mb-8 h-8"></p>

            <div class="mt-8 flex justify-end space-x-4">
                <button id="place-commission-btn" class="glass-button primary-button px-6 py-3 font-semibold rounded-lg">Pesan Item</button>
                <button id="commission-close-btn" class="glass-button px-6 py-3 font-semibold rounded-lg bg-slate-700 hover:bg-slate-600">Tutup</button>
            </div>
        </div>
    </div>
    <!-- Akhir Modal Mini-game Memesan -->

    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <p id="loading-text" class="mt-6 text-xl text-slate-400"></p>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>
